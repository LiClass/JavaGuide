### 消息队列种类
- rabbitMQ:吞吐量方面稍逊于kafkaRabbitMQ在数据一致性、稳定性和可靠性方面比较优秀，而且直接或间接的支持多种协议，对多种语言支持良          好。但是其性能和吞吐量差强人意，由于Erlang语言本身的限制，二次开发成本较高。
- kafka:快速持久化，可以在O(1)的系统开销下进行消息持久化；高吞吐，在一台普通的服务器上既可以达到10W/s的吞吐速率；完全的分布式系统，Broker、Producer、Consumer都原生自动支持分布式，自动实现复杂均衡。因为设计之初是作为日志流平台和运营消息管道平台，所以实现了消息顺序和海量堆积。kafka相对于amq来讲是一个非常轻量级的mq
- ZMQ 号称最快的MQ，C语言开发，尤其针对大吞吐量，不需要安装运行消息服务，应用程序扮演次角色。不支持持久化，功能强大但是要自己开发。

### 消息的一致性
消息确认机制：client确认编码，自动确认，消费端接到消息立刻确认
消息的顺序性
消息队列丢消息，怎么存储的

### 用的什么消息队列
### 消息队列  kafka和rocketmq区别
kafka的吞吐量更大，十倍以上

rocketMq单机支持更多的队列

Kafka消费失败不支持重试。
RocketMQ消费失败支持定时重试，每次重试间隔时间顺延

Kafka支持消息顺序，但是一台Broker宕机后，就会产生消息乱序
RocketMQ支持严格的消息顺序，在顺序消息场景下，一台Broker宕机后，发送消息会失败，但是不会乱序
Kafka不支持定时消息
RocketMQ支持两类定时消息

Kafka不支持分布式事务消息
阿里云ONS支持分布式定时消息，未来开源版本的RocketMQ也有计划支持分布式事务消息

Kafka采用Scala编写
RocketMQ采用Java语言编写

### 消息队列的幂等
要根据是由谁发起的重复发送产生的重复数据，
- 如果是client重复发送了，即发送端发送至消息服务端，并持久化，这样应该

### 是否读过消息队列的源码

### Rabbitmq 架构，基本原理

### 消息队列限流
根据clientID限制客户端每秒发送的消息条数

### kafka
通过topic下面分partition，这样同一个topic的不同partition在不同的broker节点上，实现分布式。

一个Topic可以对应多个Consumer Group。如果需要实现广播，只要每个Consumer有一个独立的Group就可以了。要实现单播只要所有的Consumer在同一个Group里。用Consumer Group还可以将Consumer进行自由的分组而不需要多次发送消息到不同的Topic。
可以多个相同的partition到不同的broker实现备份


### AMQ的使用
队列模式、一对一消费，消费者可以在生产者之后打开
订阅模式、一对多，只能收到订阅者订阅之后发布者发布的消息，允许持久化，但是没需求，不会


### ZMQ学习

高吞吐量、号称最快的mq，但是不能持久化

### AMQ学习
体量大，但是可持久化、点对点、发布订阅模式、

### kafka学习
高吞吐量、日志处理mq，极好的集成分布式、负载均衡

producer 生产者通过push的方式将产生的消息发送到topic

consumer 消费者通过pull的方式拉取消息

broker kafka节点，一个或多个broker构成kafka集群

topic 一类消息，分为多个partition

partition 在存储层面是append log


### Redis 持久化，aof，rdb

- aof：以log追加的方式记录数据库操作，分为每秒同步、每一步同步、不同步。
   - 每秒同步，异步同步，但是会丢失一秒内的数据
   - 每步同步，为同步持久化，效率最低
- 对于相同数量的数据集而言，AOF文件通常要大于RDB文件。RDB 在恢复大数据集时的速度比 AOF 的恢复速度要快。
- 根据同步策略的不同，AOF在运行效率上往往会慢于RDB。总之，每秒同步策略的效率是比较高的，同步禁用策略的效率和RDB一样高效。
- rdb：定时执行持久化操作，保存为二进制压缩文件，如果是大的数据量，效率高，因为是开启了子线程。但是不能最大限度的保证数据不丢失。   配置文件中的save命令可以配置定时执行任务，以秒为单位
- 

二者选择的标准，就是看系统是愿意牺牲一些性能，换取更高的缓存一致性（aof），还是愿意写操作频繁的时候，不启用备份来换取更高的性能，待手动运行save的时候，再做备份（rdb）。rdb这个就更有些 eventually consistent的意思了

### 2、Redis相比memcached有哪些优势？
(1) memcached所有的值均是简单的字符串，redis作为其替代者，支持更为丰富的数据类型

(2) redis的速度比memcached快很多

(3) redis可以持久化其数据

### Redis支持哪几种数据类型？
string，hash（key-value），list（列表），set（集合）及zset(sorted set：有序集合)。

### 4、Redis主要消耗什么物理资源？
内存。

### 8、一个字符串类型的值能存储最大容量是多少？
512M

### 9、为什么Redis需要把所有数据放到内存中？
Redis为了达到最快的读写速度将数据都读到内存中，并通过异步的方式将数据写入磁盘。所以redis具有快速和数据持久化的特征。如果不将数据放在内存中，磁盘I/O速度为严重影响redis的性能。在内存越来越便宜的今天，redis将会越来越受欢迎。

如果设置了最大使用的内存，则数据已有记录数达到内存限值后不能继续插入新值。

### 10、Redis集群方案应该怎么做？都有哪些方案？
2.codis，目前用的最多的集群方案，基本和twemproxy一致的效果，但它支持在 节点数量改变情况下，旧节点数据可恢复到新hash节点。
